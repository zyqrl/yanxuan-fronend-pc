(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{635:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(38),r=n(4),c=n(37),l="".concat(c.a.base_url,"/oss/oss"),d=function(data){return Object(r.f)(o.a.post("".concat(l,"/generateOssSignature"),data))}},744:function(e,t,n){var content=n(807);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(23).default)("2d8d7d5a",content,!0,{sourceMap:!1})},806:function(e,t,n){"use strict";n(744)},807:function(e,t,n){var o=n(22)(!1);o.push([e.i,'.flex[data-v-46872c68]{display:flex}.flex-inline[data-v-46872c68]{display:inline-flex}.flex-inline[data-v-46872c68]:after,.flex-inline[data-v-46872c68]:before,.flex[data-v-46872c68]:after,.flex[data-v-46872c68]:before{display:none}.flex-left[data-v-46872c68]{justify-content:flex-start}.flex-center[data-v-46872c68]{justify-content:center}.flex-right[data-v-46872c68]{justify-content:flex-end}.flex-between[data-v-46872c68]{justify-content:space-between}.flex-around[data-v-46872c68]{justify-content:space-around}.flex-stretch[data-v-46872c68]{align-items:stretch}.flex-top[data-v-46872c68]{align-items:flex-start}.flex-middle[data-v-46872c68]{align-items:center}.flex-bottom[data-v-46872c68]{align-items:flex-end}.flex-baseline[data-v-46872c68]{align-items:baseline}.flex-row[data-v-46872c68]{flex-direction:row}.flex-row-reverse[data-v-46872c68]{flex-direction:row-reverse}.flex-column[data-v-46872c68]{flex-direction:column}.flex-column-reverse[data-v-46872c68]{flex-direction:column-reverse}.flex-nowrap[data-v-46872c68]{flex-wrap:nowrap}.flex-wrap[data-v-46872c68]{flex-wrap:wrap}.flex-wrap-reverse[data-v-46872c68]{flex-wrap:wrap-reverse}.flex-wrap-stretch[data-v-46872c68]{align-content:stretch}.flex-wrap-top[data-v-46872c68]{align-content:flex-start}.flex-wrap-middle[data-v-46872c68]{align-content:center}.flex-wrap-bottom[data-v-46872c68]{align-content:flex-end}.flex-wrap-between[data-v-46872c68]{align-content:space-between}.flex-wrap-around[data-v-46872c68]{align-content:space-around}.flex-first[data-v-46872c68]{order:-1}.flex-last[data-v-46872c68]{order:99}.flex-none[data-v-46872c68]{flex:none}.flex-auto[data-v-46872c68]{flex:auto}.flex-1[data-v-46872c68]{flex:1}.hover-text[data-v-46872c68]:hover{color:#ff875b}.expend-click[data-v-46872c68]{position:relative}.expend-click[data-v-46872c68]:after{content:"";position:absolute;left:-10px;top:-10px;right:-10px;bottom:-10px}*[data-v-46872c68],[data-v-46872c68]:after,[data-v-46872c68]:before{box-sizing:border-box;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}body[data-v-46872c68],dd[data-v-46872c68],dl[data-v-46872c68],figure[data-v-46872c68],form[data-v-46872c68],h1[data-v-46872c68],h2[data-v-46872c68],h3[data-v-46872c68],h4[data-v-46872c68],h5[data-v-46872c68],ol[data-v-46872c68],p[data-v-46872c68],ul[data-v-46872c68]{margin:0;font-size:14px}button[data-v-46872c68],input[data-v-46872c68],ol[data-v-46872c68],ul[data-v-46872c68]{padding:0}li[data-v-46872c68],ol[data-v-46872c68],ul[data-v-46872c68]{list-style:none;list-style-type:none}h1[data-v-46872c68],h2[data-v-46872c68],h3[data-v-46872c68],h4[data-v-46872c68],h5[data-v-46872c68]{font-size:100%}input[data-v-46872c68]{border:0;margin:0}img[data-v-46872c68]{width:100%}a[data-v-46872c68],button[data-v-46872c68],img[data-v-46872c68],input[data-v-46872c68],optgroup[data-v-46872c68],select[data-v-46872c68],textarea[data-v-46872c68]{outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}a[data-v-46872c68],img[data-v-46872c68]{-webkit-touch-callout:none;border:0}body[data-v-46872c68],html[data-v-46872c68]{position:absolute;min-height:100%;height:100%;width:100%}button[data-v-46872c68],img[data-v-46872c68],input[data-v-46872c68],textarea[data-v-46872c68]{vertical-align:middle;outline:none}body[data-v-46872c68]{font-family:PingFang SC,Microsoft YaHei,Helvetica,STHeiTi,sans-serif!important;color:#333;-webkit-font-smoothing:antialiased;font-smoothing:antialiased;overflow-anchor:none}table[data-v-46872c68]{border-collapse:collapse;border-spacing:0}a[data-v-46872c68],table[data-v-46872c68]{color:#333}a[data-v-46872c68],a[data-v-46872c68]:hover{text-decoration:none}a[data-v-46872c68]:hover{color:#ff512b}.scrollbar-self[data-v-46872c68]::-webkit-scrollbar{width:4px;background-color:none}.scrollbar-self[data-v-46872c68]::-webkit-scrollbar-track{background-color:none}.scrollbar-self[data-v-46872c68]::-webkit-scrollbar-thumb{background:#ddd;border-radius:10px}.account-user-info[data-v-46872c68]{width:1000px;border:1px solid #ddd;font-size:14px;color:#333}.account-user-info .account-user-info__label[data-v-46872c68]{height:42px;line-height:42px;padding-left:24px;border-bottom:1px solid #ddd;background:#f8f8f8}.account-user-info .account-user-info__content[data-v-46872c68]{padding:44px 69px;background:#fff}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .el-form-item__label{margin-right:40px;color:#333}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .user-info-content__avatar{margin-top:-13px}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .user-info-content__avatar .el-image{width:70px;height:70px;margin-right:30px;border-radius:50%}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .user-info-content__avatar .el-button{width:89px;height:30px;border-radius:15px 15px 15px 15px;border:1px solid #eee}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .form-item__nickname{margin-left:-10px}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .user-info-content__nickname{height:35px;width:210px}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .user-info-content__nickname .el-input__inner{border:1px solid #eee}.account-user-info .account-user-info__content[data-v-46872c68] .el-form .ui-button{width:136px;height:36px}',""]),e.exports=o},898:function(e,t,n){"use strict";n.r(t);n(25),n(28),n(10),n(43),n(24),n(44);var o=n(6),r=n(15),c=(n(47),n(31),n(65),n(30),n(35)),l=n(111),d=n(92),f=n(20),v=n(114),m=n(635);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _={name:"AccountUserInfo",components:{UiButton:d.default},data:function(){return{SEX_TYPE:f.e,form:{nickname:"",gender:f.e.MALE,avatar:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:10,message:"请输入1-10个字符",trigger:"blur"}]},ossUploadUrl:"",ossDirName:"",fileName:"",uploadData:{},uploadLoading:!1}},computed:h({},Object(c.b)(["userInfo","token"])),watch:{userInfo:{deep:!0,handler:function(e){e&&Object.keys(e).length>0&&this.initData()}}},created:function(){this.getOssConfig(),this.userInfo&&Object.keys(this.userInfo).length>0&&this.initData()},methods:{initData:function(){if(this.token){var e=this.userInfo,t=e.nickname,n=e.gender,o=e.avatar;Object.assign(this.form,{nickname:t,gender:n===f.e.UNKNOW?f.e.MALE:n,avatar:o})}},getOssConfig:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,c,l,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.a)({configId:"account-avatar/",serviceName:"uc"});case 2:n=t.sent,(o=n.result)&&(r=o.dir,c=o.host,l=o.policy,d=o.accessId,f=o.signature,e.ossUploadUrl=c,e.ossDirName=r,Object.assign(e.uploadData,{policy:l,OSSAccessKeyId:d,success_action_status:200,signature:f}));case 5:case"end":return t.stop()}}),t)})))()},handleBeforeUpload:function(e){this.uploadLoading=!0,this.fileName=e.name,Object.assign(this.uploadData,{key:"".concat(this.ossDirName,"${filename}"),name:e.name})},handleUploadSuccess:function(){this.uploadLoading=!1,this.form.avatar="".concat(this.ossUploadUrl,"/").concat(this.ossDirName).concat(this.fileName)},handleUploadError:function(){this.uploadLoading=!1},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.next=3,Object(v.e)(h({},e.form));case 3:o=t.sent,o.result&&(l.Message.success("修改成功"),e.$store.dispatch("getUserInfo"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},w=_,k=(n(806),n(14)),component=Object(k.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"account-user-info"},[n("div",{staticClass:"account-user-info__label"},[e._v("个人资料")]),e._v(" "),n("div",{staticClass:"account-user-info__content"},[n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"头像"}},[n("div",{staticClass:"user-info-content__avatar flex flex-middle"},[n("el-image",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}],attrs:{fit:"cover",src:e.form.avatar,"preview-src-list":[e.form.avatar]}}),e._v(" "),n("el-upload",{attrs:{action:e.ossUploadUrl,data:e.uploadData,"show-file-list":!1,"on-success":e.handleUploadSuccess,"before-upload":e.handleBeforeUpload,"on-error":e.handleUploadError}},[n("el-button",[e._v("修改头像")])],1)],1)]),e._v(" "),n("el-form-item",{staticClass:"form-item__nickname",attrs:{label:"昵称",prop:"nickname"}},[n("el-input",{staticClass:"user-info-content__nickname",attrs:{placeholder:"请输入昵称"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"性别"}},[n("el-radio",{attrs:{label:e.SEX_TYPE.MALE},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("男")]),e._v(" "),n("el-radio",{attrs:{label:e.SEX_TYPE.FEMALE},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("女")])],1),e._v(" "),n("el-form-item",[n("UiButton",{attrs:{type:"yellow_gradual",radius:!0},on:{click:e.onSubmit}},[e._v("确认保存")])],1)],1)],1)])}),[],!1,null,"46872c68",null);t.default=component.exports;installComponents(component,{UiButton:n(92).default})}}]);