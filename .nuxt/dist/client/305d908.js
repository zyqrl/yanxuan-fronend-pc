(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{595:function(e,t,r){"use strict";r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return x})),r.d(t,"g",(function(){return y})),r.d(t,"f",(function(){return h})),r.d(t,"l",(function(){return w})),r.d(t,"j",(function(){return O})),r.d(t,"k",(function(){return T})),r.d(t,"h",(function(){return k})),r.d(t,"i",(function(){return I}));r(30);var n=r(38),o=r(4),d=r(37),l="".concat(d.a.base_url,"/mall/trade"),c=function(e){return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/page"),{params:e}))},f=function(e){return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/buyAdvanceOrder"),{params:e}))},v=function(e){return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/cartAdvanceOrder"),{params:e}))},m=function(e){return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/").concat(e)))},x=function(e){return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/listOrderProductWaitComment"),{params:e}))},y=function(e){var t=e.orderId;return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/payResult/").concat(t)))},h=function(e){return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/listReceiveOrder"),{params:e}))},w=function(data){return Object(o.f)(n.a.put("".concat(l,"/app/tradeOrder/receive"),data))},O=function(data){return Object(o.f)(n.a.post("".concat(l,"/app/tradeOrder/submitOrder"),data))},T=function(data){return Object(o.f)(n.a.put("".concat(l,"/app/tradeOrder/cancel"),data))},k=function(){return Object(o.f)(n.a.get("".concat(l,"/app/tradeOrder/statistics")))},I=function(data){return Object(o.f)(n.a.put("".concat(l,"/app/refundOrder/statistics"),data))}},612:function(e,t,r){var content=r(626);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(23).default)("4a65f6b9",content,!0,{sourceMap:!1})},615:function(e,t,r){"use strict";r.r(t);var n=r(6),o=(r(47),r(178),r(26),r(60),r(59),r(30),r(38)),d=r(4),l=r(37),c="".concat(l.a.base_url,"/mall/trade"),f=r(595),v=r(387),m=r(92),x=r(662),y=r.n(x),h={components:{UiMoney:v.default,UiButton:m.default},props:{visible:{type:Boolean,default:!1},orderId:{type:Number|String,default:""},payType:{type:null|String,require:!0}},data:function(){return{orderInfo:{},imgUrl:"",imgTip:"二维码获取中",timerTxt:"",startSecondNum:0,timerStop:null,myPayType:null,payUUID:null}},watch:{myPayType:function(e){e&&this.getQrCode()}},computed:{myVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},title:function(){var e="请选择支付方式";return"wx"===this.myPayType?e="打开微信扫描付款":"ali"===this.myPayType&&(e="打开支付宝扫描付款"),e}},methods:{open:function(){this.getOrderInfo(),this.myPayType=this.payType,this.myPayType&&this.getQrCode()},getOrderInfo:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)(e.orderId);case 2:if(r=t.sent,n=r.error,o=r.result,!n){t.next=8;break}return e.$message.warning(n.message),t.abrupt("return",!1);case 8:e.orderInfo=o,1===e.orderInfo.orderStatus&&(e.timerStop&&clearInterval(e.timerStop),e.calcTimerStartSecondNum(),e.timer());case 10:case"end":return t.stop()}}),t)})))()},getQrCode:function(){this.payUUID=Object(d.a)(),"wx"==this.myPayType?this.getWxCodeImg(this.payUUID):"ali"===this.myPayType&&this.getAliCodeImg(this.payUUID)},getAliCodeImg:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,data={orderId:t.orderId},Object(d.f)(o.a.post("".concat(c,"/payCenter/aliPay/qr"),data));case 2:if(n=r.sent,l=n.error,f=n.result,t.payUUID===e){r.next=7;break}return r.abrupt("return",!1);case 7:if(!l){r.next=10;break}return t.imgTip=l.message,r.abrupt("return",!1);case 10:y.a.toDataURL(f.payDataInfo.qrCodeData,{width:200},(function(e,r){t.imgUrl=r}));case 11:case"end":return r.stop()}var data}),r)})))()},getWxCodeImg:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,data={orderId:t.orderId},Object(d.f)(o.a.post("".concat(c,"/payCenter/wxPay/nativeData"),data));case 2:if(n=r.sent,l=n.error,f=n.result,t.payUUID===e){r.next=7;break}return r.abrupt("return",!1);case 7:if(!l){r.next=10;break}return t.imgTip=l.message,r.abrupt("return",!1);case 10:y.a.toDataURL(f.payDataInfo.codeUrlData,{width:200},(function(e,r){t.imgUrl=r}));case 11:case"end":return r.stop()}var data}),r)})))()},calcTimerStartSecondNum:function(){var e=this,t=new Date(this.orderInfo.expireTime.replace(/-/g,"/")).getTime(),r=new Date(this.orderInfo.serverTime.replace(/-/g,"/")).getTime(),n=Math.floor((t-r)/1e3);this.startSecondNum=n>0?n:0,this.timerStop=setInterval((function(){e.timer()}),1e3)},timer:function(){if(0!=this.startSecondNum){this.startSecondNum--;var e=parseInt(this.startSecondNum/60),t=parseInt(this.startSecondNum%60);this.timerTxt="剩余".concat(e>0?"".concat(e,"分"):""," ").concat(t,"秒")}else this.close()},close:function(){clearInterval(this.timerStop),this.timerStop=null,this.myPayType=this.payType,this.$emit("cancel")},finish:function(){this.myVisible=!1,this.$emit("finish")},back:function(){this.myPayType=null,this.imgUrl=null,this.imgTip="二维码获取中"}}},w=(r(625),r(14)),component=Object(w.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"box",attrs:{title:e.title,width:"380px",center:"",visible:e.myVisible,modal:!1},on:{"update:visible":function(t){e.myVisible=t},open:e.open,close:e.close}},[e.myPayType?n("div",{staticClass:"pay"},[n("span",{staticClass:"pay--timer"},[e._v(e._s(e.timerTxt))]),e._v(" "),n("UiMoney",{staticClass:"money",attrs:{sufSize:"14px",preSize:"14px",size:"20px",float:"",suffix:"",prefix:"",money:e.orderInfo.payAmount}}),e._v(" "),n("div",{staticClass:"pay--code"},[e.imgUrl?n("img",{attrs:{src:e.imgUrl}}):n("span",[e._v(e._s(e.imgTip))])]),e._v(" "),n("p",{staticClass:"pay--tips"},[e._v("如支付后没有自动跳转，请点击 "),n("span",{staticClass:"pay--finish",on:{click:e.finish}},[e._v("完成付款")])]),e._v(" "),n("UiButton",{staticClass:"pay--btn",attrs:{type:"yellow_gradual"},on:{click:e.back}},[e._v("其他支付方式")])],1):n("div",{staticClass:"pay-type"},[n("el-radio-group",{model:{value:e.myPayType,callback:function(t){e.myPayType=t},expression:"myPayType"}},[n("el-radio",{staticClass:"pay-type--item",attrs:{label:"wx"}},[n("img",{staticClass:"pay-type--wx",attrs:{src:r(616)}})]),e._v(" "),n("el-radio",{staticClass:"pay-type--item",attrs:{label:"ali"}},[n("img",{staticClass:"pay-type--ali",attrs:{src:r(617)}})])],1)],1)])}),[],!1,null,"1b6e7a16",null);t.default=component.exports;installComponents(component,{UiMoney:r(387).default,UiButton:r(92).default})},616:function(e,t,r){e.exports=r.p+"img/wx.5493ac2.png"},617:function(e,t,r){e.exports=r.p+"img/zfb.a438bcd.png"},625:function(e,t,r){"use strict";r(612)},626:function(e,t,r){var n=r(22)(!1);n.push([e.i,'.flex[data-v-1b6e7a16]{display:flex}.flex-inline[data-v-1b6e7a16]{display:inline-flex}.flex-inline[data-v-1b6e7a16]:after,.flex-inline[data-v-1b6e7a16]:before,.flex[data-v-1b6e7a16]:after,.flex[data-v-1b6e7a16]:before{display:none}.flex-left[data-v-1b6e7a16]{justify-content:flex-start}.flex-center[data-v-1b6e7a16]{justify-content:center}.flex-right[data-v-1b6e7a16]{justify-content:flex-end}.flex-between[data-v-1b6e7a16]{justify-content:space-between}.flex-around[data-v-1b6e7a16]{justify-content:space-around}.flex-stretch[data-v-1b6e7a16]{align-items:stretch}.flex-top[data-v-1b6e7a16]{align-items:flex-start}.flex-middle[data-v-1b6e7a16]{align-items:center}.flex-bottom[data-v-1b6e7a16]{align-items:flex-end}.flex-baseline[data-v-1b6e7a16]{align-items:baseline}.flex-row[data-v-1b6e7a16]{flex-direction:row}.flex-row-reverse[data-v-1b6e7a16]{flex-direction:row-reverse}.flex-column[data-v-1b6e7a16]{flex-direction:column}.flex-column-reverse[data-v-1b6e7a16]{flex-direction:column-reverse}.flex-nowrap[data-v-1b6e7a16]{flex-wrap:nowrap}.flex-wrap[data-v-1b6e7a16]{flex-wrap:wrap}.flex-wrap-reverse[data-v-1b6e7a16]{flex-wrap:wrap-reverse}.flex-wrap-stretch[data-v-1b6e7a16]{align-content:stretch}.flex-wrap-top[data-v-1b6e7a16]{align-content:flex-start}.flex-wrap-middle[data-v-1b6e7a16]{align-content:center}.flex-wrap-bottom[data-v-1b6e7a16]{align-content:flex-end}.flex-wrap-between[data-v-1b6e7a16]{align-content:space-between}.flex-wrap-around[data-v-1b6e7a16]{align-content:space-around}.flex-first[data-v-1b6e7a16]{order:-1}.flex-last[data-v-1b6e7a16]{order:99}.flex-none[data-v-1b6e7a16]{flex:none}.flex-auto[data-v-1b6e7a16]{flex:auto}.flex-1[data-v-1b6e7a16]{flex:1}.hover-text[data-v-1b6e7a16]:hover{color:#ff875b}.expend-click[data-v-1b6e7a16]{position:relative}.expend-click[data-v-1b6e7a16]:after{content:"";position:absolute;left:-10px;top:-10px;right:-10px;bottom:-10px}*[data-v-1b6e7a16],[data-v-1b6e7a16]:after,[data-v-1b6e7a16]:before{box-sizing:border-box;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}body[data-v-1b6e7a16],dd[data-v-1b6e7a16],dl[data-v-1b6e7a16],figure[data-v-1b6e7a16],form[data-v-1b6e7a16],h1[data-v-1b6e7a16],h2[data-v-1b6e7a16],h3[data-v-1b6e7a16],h4[data-v-1b6e7a16],h5[data-v-1b6e7a16],ol[data-v-1b6e7a16],p[data-v-1b6e7a16],ul[data-v-1b6e7a16]{margin:0;font-size:14px}button[data-v-1b6e7a16],input[data-v-1b6e7a16],ol[data-v-1b6e7a16],ul[data-v-1b6e7a16]{padding:0}li[data-v-1b6e7a16],ol[data-v-1b6e7a16],ul[data-v-1b6e7a16]{list-style:none;list-style-type:none}h1[data-v-1b6e7a16],h2[data-v-1b6e7a16],h3[data-v-1b6e7a16],h4[data-v-1b6e7a16],h5[data-v-1b6e7a16]{font-size:100%}input[data-v-1b6e7a16]{border:0;margin:0}img[data-v-1b6e7a16]{width:100%}a[data-v-1b6e7a16],button[data-v-1b6e7a16],img[data-v-1b6e7a16],input[data-v-1b6e7a16],optgroup[data-v-1b6e7a16],select[data-v-1b6e7a16],textarea[data-v-1b6e7a16]{outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}a[data-v-1b6e7a16],img[data-v-1b6e7a16]{-webkit-touch-callout:none;border:0}body[data-v-1b6e7a16],html[data-v-1b6e7a16]{position:absolute;min-height:100%;height:100%;width:100%}button[data-v-1b6e7a16],img[data-v-1b6e7a16],input[data-v-1b6e7a16],textarea[data-v-1b6e7a16]{vertical-align:middle;outline:none}body[data-v-1b6e7a16]{font-family:PingFang SC,Microsoft YaHei,Helvetica,STHeiTi,sans-serif!important;color:#333;-webkit-font-smoothing:antialiased;font-smoothing:antialiased;overflow-anchor:none}table[data-v-1b6e7a16]{border-collapse:collapse;border-spacing:0}a[data-v-1b6e7a16],table[data-v-1b6e7a16]{color:#333}a[data-v-1b6e7a16],a[data-v-1b6e7a16]:hover{text-decoration:none}a[data-v-1b6e7a16]:hover{color:#ff512b}.scrollbar-self[data-v-1b6e7a16]::-webkit-scrollbar{width:4px;background-color:none}.scrollbar-self[data-v-1b6e7a16]::-webkit-scrollbar-track{background-color:none}.scrollbar-self[data-v-1b6e7a16]::-webkit-scrollbar-thumb{background:#ddd;border-radius:10px}.box[data-v-1b6e7a16]{background:rgba(0,0,0,.5)}.pay-type[data-v-1b6e7a16]{width:270px;padding:0 30px}.pay-type--item[data-v-1b6e7a16]{width:270px;height:56px;display:flex;align-items:center;border:1px solid #ccc;padding-left:55px;margin-bottom:20px}.pay-type--wx[data-v-1b6e7a16]{width:108px}.pay-type--ali[data-v-1b6e7a16]{width:78px}.pay[data-v-1b6e7a16]{text-align:center}.pay--code[data-v-1b6e7a16]{width:160px;height:160px;margin:15px auto 20px;position:relative;overflow:hidden}.pay--code img[data-v-1b6e7a16]{width:200px;position:absolute;left:-20px;top:-20px}.pay--code span[data-v-1b6e7a16]{line-height:100px;color:#999}.pay--timer[data-v-1b6e7a16]{color:#999;display:block;margin-bottom:15px}.pay--timer[data-v-1b6e7a16],.pay--tips[data-v-1b6e7a16]{font-size:14px}.pay--finish[data-v-1b6e7a16]{color:#ff512b;cursor:pointer}.pay--btn[data-v-1b6e7a16]{border-radius:4px;width:143px;height:32px;margin-top:20px}.money[data-v-1b6e7a16]{color:#ff512b;font-weight:700}[data-v-1b6e7a16] .el-dialog{border-radius:4px}[data-v-1b6e7a16] .el-dialog__header{padding:30px 0 15px}[data-v-1b6e7a16] .el-dialog__title{font-size:20px;font-weight:700}[data-v-1b6e7a16] .el-dialog__body{padding-top:0;padding-bottom:50px}[data-v-1b6e7a16] .el-dialog__headerbtn{top:32px;right:30px}',""]),e.exports=n}}]);